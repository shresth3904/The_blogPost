<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel = "stylesheet" href = "{{url_for('static', filename = 'style.css')}}">
</head>
<body id = "blog_link">
    <div class = "top">
            <a class = "left" href = "{{url_for('index')}}">The BlogPost</a>
            <div class = "nav_links">
                {% if current_user.is_authenticated %}
                    <a class = "right" href="{{ url_for('dashboard') }}">Dashboard</a>
                    <a class = "right" href="{{ url_for('logout') }}">Logout</a>
                {% else %}
                    <a class = "right" href="{{ url_for('login') }}">Login</a>
                {% endif %}
            </div>
            
        </div>
        <div class="progress-container">
    <div class="progress-bar" id="myBar"></div>
</div>
    <div id = "back_frame">
        <br>
            <button id = "back_button" onclick = "main_menu()">⇦ Home</button>
        <br><br>
    </div>
    <blog id = "blog_page">
        <div id = "blog_struct">
            <h1 id = "title" >{{blog[0]}}</h1>
            <info>
                <div class = "info">{{blog[3]}}</div>
                <div class = "info">•</div>
                <div class = "info">{{blog[2]}}</div>
            </info>
            <br>
            <img id="blog_img" src="{{ img_dict[blog_id] }}" onerror="setDefaultImage(this);">
            <br>
            <pre id = "content" style="white-space: pre-wrap;">{{blog[1] | replace('\n', '<br>' | safe)}}</pre>
        </div>
        <br>
        
        <div id = "comment_section">
            <br>
                <form method = "POST" action = "/comment">
                    <div>
                        <input autocomplete = "off" type="text" id = "comment" placeholder="Name" name = "name" required>
                    </div>
                    <textarea type="text" id = "comment" placeholder="Type your comment..." name = "comment"></textarea>
                    <br>
                    <input type="hidden" name="id" value="{{blog_id}}">
                    <div id = "comment_buttons">
                        <input class = "comment_btn" type = "submit" value = "submit"></input>
                    </div>
                </form>
            </div>
        <div class = "comments">
                <h2>Comments</h2>
                <br>
                {% if comments%}
                {% for comment in comments %}
                    <div class = "single_comment">
                        <h3 id = "user_name">{{comment[0]}}</h3>
                        <p style="white-space: pre-wrap;" id = "user_comment">{{comment[1]}}</p>
                    </div>
                {% endfor %}
                {% else %}
                    <h3 id = "user_name">No comments yet. Be the first to comment!</h3>
                {% endif %}
            <br><br><br>

        </div>
        <div id = "footer" class = "footer" >
        <div class = "footer_content">
            <div class = "link_box">
            <div class = "quick_links" style = "color:white;">
                <h1>Quick Links</h1>
                <ul>
                    <li><a class = "links" href = "{{url_for('index')}}">Home</a></li>
                    <li><a class = "links" href = "{{url_for('dashboard')}}">Dashboard</a></li>
                    {% if current_user.is_authenticated %}
                        <li><a class = "links" href = "{{url_for('logout')}}">Logout</a></li>
                    {% else %}
                        <li><a class = "links" href = "{{url_for('login')}}">Login</a></li>
                        <li><a class = "links" href = "{{url_for('signup')}}">Signup</a></li>
                    {% endif %}
                    <li><a class = "links" href = "{{url_for('submit')}}">Post new blog</a></li>
                </ul>
            </div>
        </div>
            <div class = "quote">
                <p style = "text-align:center; color:white;">" Don't focus on having a great blog. Focus on producing a <br>blog that's great for your readers. "<br> - Brian Clark</p>
            </div>
        </div>
        <div class = "footer_bottom">
            <a  href = "https://www.linkedin.com/in/shresth-65ab02304/" style = "color:white;">LinkedIn</a>
            <a href = "https://github.com/shresth3904" style = "color:white;">Github</a>
            <p style = "text-align:center; color:white;">&copy; 2025 The BlogPost. All rights reserved.</p>
        </div>
    </blog>

        </div>
        <script>
            let homeUrl = "{{ url_for('index') }}";
            function setDefaultImage(imageElement) {
                imageElement.onerror = null; 
                imageElement.src = "{{ url_for('static', filename='blog.png') }}";
            }

            window.onscroll = function() {
                scrollFunction();
            };

            function scrollFunction() {
               
                var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;

                
                var scrolled = (winScroll / height) * 100;

                document.getElementById("myBar").style.width = scrolled + "%";
            }
        </script>
        <script src = "{{url_for('static', filename= 'script.js')}}"></script>
</body>
</html>